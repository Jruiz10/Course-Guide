{"ast":null,"code":"var _jsxFileName = \"/Users/joeruiz/Desktop/course-guide/Course-Guide-Frontend/src/components/loginForm.jsx\";\nimport React from \"react\";\nimport { Redirect } from \"react-router-dom\";\nimport Joi from \"joi-browser\";\nimport Form from \"../common/form\";\nimport auth from \"../service/authService\";\n\nclass LoginForm extends Form {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      data: {\n        username: \"\",\n        password: \"\"\n      },\n      errors: {}\n    };\n    this.schema = {\n      username: Joi.string().required().label(\"Username\"),\n      password: Joi.string().required().label(\"Password\")\n    };\n\n    this.doSubmit = async () => {\n      try {\n        const {\n          data\n        } = this.state;\n        await auth.login(data.username, data.password); // auth.loginWithJwt(response.headers[\"x-access-token\"]);\n\n        const {\n          state\n        } = this.props.location;\n        window.location = state ? state.from.pathname : \"/advisorHome\";\n      } catch (ex) {\n        if (ex.response && ex.response.status === 400) {\n          const errors = { ...this.state.errors\n          };\n          errors.username = ex.response.data;\n          this.setState({\n            errors\n          });\n        }\n      }\n    };\n  }\n\n  render() {\n    if (auth.getCurrentUser()) return /*#__PURE__*/React.createElement(Redirect, {\n      to: \"/\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 35,\n        columnNumber: 39\n      }\n    });\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 9\n      }\n    }, \"Login\"), /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 9\n      }\n    }, this.renderInput(\"username\", \"Username\"), this.renderInput(\"password\", \"Password\", \"password\"), this.renderButton(\"Login\")));\n  }\n\n}\n\nexport default LoginForm;\n{\n  /* <div>\n        <form onSubmit={this.handleSubmit}>\n          <div className=\"form-group\">\n            <label htmlFor=\"username\">Username</label>\n            <input\n              type=\"text\"\n              name=\"username\"\n              className=\"form-control\"\n              value={this.state.data.username}\n              onChange={this.handleChange}\n              id=\"username\"\n              aria-describedby=\"emailHelp\"\n              style={{\n                width: \"100%\",\n                display: \"flex\",\n                justifyContent: \"center\",\n                alignItems: \"center\",\n              }}\n            />\n            {this.state.errors.username && (\n              <div className=\"alert alert-danger\">\n                {\" \"}\n                {this.state.errors.username}\n              </div>\n            )}\n          </div>\n          <div className=\"form-group\">\n            <label htmlFor=\"password\">Password</label>\n            <input\n              id=\"password\"\n              value={this.state.data.password}\n              name=\"password\"\n              onChange={this.handleChange}\n              type=\"text\"\n              className=\"form-control\"\n              style={{\n                width: \"100%\",\n                display: \"flex\",\n                justifyContent: \"center\",\n                alignItems: \"center\",\n              }}\n            />\n            {this.state.errors.password && (\n              <div className=\"alert alert-danger\">\n                {\" \"}\n                {this.state.errors.password}\n              </div>\n            )}\n            {/*  <Link to=\"/studentHome\">\n              <button\n                disabled={this.validate()}\n                className=\"btn btn-primary\"\n                style={{ marginLeft: \"20%\" }}\n              >\n                Login Student\n              </button>\n            </Link> \n            <Link to=\"/advisorHome\">\n              <button\n                disabled={this.validate()}\n                className=\"btn btn-primary\"\n                style={{ marginLeft: \"20%\", marginTop: \"10px\" }}\n              >\n                Submit\n              </button>\n            </Link>\n          </div>\n        </form>\n      </div> */\n}","map":{"version":3,"sources":["/Users/joeruiz/Desktop/course-guide/Course-Guide-Frontend/src/components/loginForm.jsx"],"names":["React","Redirect","Joi","Form","auth","LoginForm","state","data","username","password","errors","schema","string","required","label","doSubmit","login","props","location","window","from","pathname","ex","response","status","setState","render","getCurrentUser","handleSubmit","renderInput","renderButton"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,QAAT,QAAyB,kBAAzB;AACA,OAAOC,GAAP,MAAgB,aAAhB;AACA,OAAOC,IAAP,MAAiB,gBAAjB;AACA,OAAOC,IAAP,MAAiB,wBAAjB;;AAEA,MAAMC,SAAN,SAAwBF,IAAxB,CAA6B;AAAA;AAAA;AAAA,SAC3BG,KAD2B,GACnB;AACNC,MAAAA,IAAI,EAAE;AAAEC,QAAAA,QAAQ,EAAE,EAAZ;AAAgBC,QAAAA,QAAQ,EAAE;AAA1B,OADA;AAENC,MAAAA,MAAM,EAAE;AAFF,KADmB;AAAA,SAM3BC,MAN2B,GAMlB;AACPH,MAAAA,QAAQ,EAAEN,GAAG,CAACU,MAAJ,GAAaC,QAAb,GAAwBC,KAAxB,CAA8B,UAA9B,CADH;AAEPL,MAAAA,QAAQ,EAAEP,GAAG,CAACU,MAAJ,GAAaC,QAAb,GAAwBC,KAAxB,CAA8B,UAA9B;AAFH,KANkB;;AAAA,SAW3BC,QAX2B,GAWhB,YAAY;AACrB,UAAI;AACF,cAAM;AAAER,UAAAA;AAAF,YAAW,KAAKD,KAAtB;AACA,cAAMF,IAAI,CAACY,KAAL,CAAWT,IAAI,CAACC,QAAhB,EAA0BD,IAAI,CAACE,QAA/B,CAAN,CAFE,CAGF;;AACA,cAAM;AAAEH,UAAAA;AAAF,YAAY,KAAKW,KAAL,CAAWC,QAA7B;AACAC,QAAAA,MAAM,CAACD,QAAP,GAAkBZ,KAAK,GAAGA,KAAK,CAACc,IAAN,CAAWC,QAAd,GAAyB,cAAhD;AACD,OAND,CAME,OAAOC,EAAP,EAAW;AACX,YAAIA,EAAE,CAACC,QAAH,IAAeD,EAAE,CAACC,QAAH,CAAYC,MAAZ,KAAuB,GAA1C,EAA+C;AAC7C,gBAAMd,MAAM,GAAG,EAAE,GAAG,KAAKJ,KAAL,CAAWI;AAAhB,WAAf;AACAA,UAAAA,MAAM,CAACF,QAAP,GAAkBc,EAAE,CAACC,QAAH,CAAYhB,IAA9B;AACA,eAAKkB,QAAL,CAAc;AAAEf,YAAAA;AAAF,WAAd;AACD;AACF;AACF,KAzB0B;AAAA;;AA2B3BgB,EAAAA,MAAM,GAAG;AACP,QAAItB,IAAI,CAACuB,cAAL,EAAJ,EAA2B,oBAAO,oBAAC,QAAD;AAAU,MAAA,EAAE,EAAC,GAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAP;AAE3B,wBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eADF,eAEE;AAAM,MAAA,QAAQ,EAAE,KAAKC,YAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG,KAAKC,WAAL,CAAiB,UAAjB,EAA6B,UAA7B,CADH,EAEG,KAAKA,WAAL,CAAiB,UAAjB,EAA6B,UAA7B,EAAyC,UAAzC,CAFH,EAGG,KAAKC,YAAL,CAAkB,OAAlB,CAHH,CAFF,CADF;AAUD;;AAxC0B;;AA2C7B,eAAezB,SAAf;AAEA;AACE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqED","sourcesContent":["import React from \"react\";\nimport { Redirect } from \"react-router-dom\";\nimport Joi from \"joi-browser\";\nimport Form from \"../common/form\";\nimport auth from \"../service/authService\";\n\nclass LoginForm extends Form {\n  state = {\n    data: { username: \"\", password: \"\" },\n    errors: {},\n  };\n\n  schema = {\n    username: Joi.string().required().label(\"Username\"),\n    password: Joi.string().required().label(\"Password\"),\n  };\n\n  doSubmit = async () => {\n    try {\n      const { data } = this.state;\n      await auth.login(data.username, data.password);\n      // auth.loginWithJwt(response.headers[\"x-access-token\"]);\n      const { state } = this.props.location;\n      window.location = state ? state.from.pathname : \"/advisorHome\";\n    } catch (ex) {\n      if (ex.response && ex.response.status === 400) {\n        const errors = { ...this.state.errors };\n        errors.username = ex.response.data;\n        this.setState({ errors });\n      }\n    }\n  };\n\n  render() {\n    if (auth.getCurrentUser()) return <Redirect to=\"/\" />;\n\n    return (\n      <div>\n        <h1>Login</h1>\n        <form onSubmit={this.handleSubmit}>\n          {this.renderInput(\"username\", \"Username\")}\n          {this.renderInput(\"password\", \"Password\", \"password\")}\n          {this.renderButton(\"Login\")}\n        </form>\n      </div>\n    );\n  }\n}\n\nexport default LoginForm;\n\n{\n  /* <div>\n        <form onSubmit={this.handleSubmit}>\n          <div className=\"form-group\">\n            <label htmlFor=\"username\">Username</label>\n            <input\n              type=\"text\"\n              name=\"username\"\n              className=\"form-control\"\n              value={this.state.data.username}\n              onChange={this.handleChange}\n              id=\"username\"\n              aria-describedby=\"emailHelp\"\n              style={{\n                width: \"100%\",\n                display: \"flex\",\n                justifyContent: \"center\",\n                alignItems: \"center\",\n              }}\n            />\n            {this.state.errors.username && (\n              <div className=\"alert alert-danger\">\n                {\" \"}\n                {this.state.errors.username}\n              </div>\n            )}\n          </div>\n          <div className=\"form-group\">\n            <label htmlFor=\"password\">Password</label>\n            <input\n              id=\"password\"\n              value={this.state.data.password}\n              name=\"password\"\n              onChange={this.handleChange}\n              type=\"text\"\n              className=\"form-control\"\n              style={{\n                width: \"100%\",\n                display: \"flex\",\n                justifyContent: \"center\",\n                alignItems: \"center\",\n              }}\n            />\n            {this.state.errors.password && (\n              <div className=\"alert alert-danger\">\n                {\" \"}\n                {this.state.errors.password}\n              </div>\n            )}\n            {/*  <Link to=\"/studentHome\">\n              <button\n                disabled={this.validate()}\n                className=\"btn btn-primary\"\n                style={{ marginLeft: \"20%\" }}\n              >\n                Login Student\n              </button>\n            </Link> \n            <Link to=\"/advisorHome\">\n              <button\n                disabled={this.validate()}\n                className=\"btn btn-primary\"\n                style={{ marginLeft: \"20%\", marginTop: \"10px\" }}\n              >\n                Submit\n              </button>\n            </Link>\n          </div>\n        </form>\n      </div> */\n}\n"]},"metadata":{},"sourceType":"module"}