{"ast":null,"code":"var _jsxFileName = \"/Users/joeruiz/Desktop/course-guide/Course-Guide-Frontend/src/components/loginForm.jsx\";\nimport React from \"react\";\nimport { Redirect } from \"react-router-dom\";\nimport Joi from \"joi-browser\";\nimport Form from \"../common/form\";\nimport auth from \"../service/authService\";\n\nclass LoginForm extends Form {\n  constructor(props) {\n    super(props);\n    this.state = {\n      data: {\n        username: \"\",\n        password: \"\"\n      },\n      errors: {}\n    };\n    this.schema = {\n      username: Joi.string().required().label(\"Username\"),\n      password: Joi.string().required().label(\"Password\")\n    };\n\n    this.doSubmit = async () => {\n      try {\n        const {\n          data\n        } = this.state;\n        await auth.login(data.username, data.password); // auth.loginWithJwt(response.headers[\"x-access-token\"]);\n\n        const user = auth.getCurrentUser();\n        var isAdvisor = user._doc.isAdvisor;\n        console.log(isAdvisor);\n        const {\n          state\n        } = this.props.location;\n\n        if (isAdvisor == true) {\n          window.location.href = \"/advisorHome\";\n          console.log(\"Going to advisor page\");\n        } else if (!isAdvisor) {\n          window.location.href = \"/studentHome\";\n          console.log(\"Going to student page\");\n        }\n      } catch (ex) {\n        if (ex.response && ex.response.status === 400) {\n          const errors = { ...this.state.errors\n          };\n          errors.username = ex.response.data;\n          this.setState({\n            errors\n          });\n        }\n      }\n    };\n\n    console.log(props);\n  }\n\n  render() {\n    /* if (user._doc.isAdvisor == true) {\n      if (auth.getCurrentUser()) return <Redirect to=\"/advisorHome\" />;\n    } else {\n      if (auth.getCurrentUser()) return <Redirect to=\"/studentHome\" />;\n    } */\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 9\n      }\n    }, \"Login\"), /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }\n    }, this.renderInput(\"username\", \"Username\"), this.renderInput(\"password\", \"Password\", \"password\"), this.renderButton(\"Login\")));\n  }\n\n}\n\nexport default LoginForm;\n{\n  /* <div>\n        <form onSubmit={this.handleSubmit}>\n          <div className=\"form-group\">\n            <label htmlFor=\"username\">Username</label>\n            <input\n              type=\"text\"\n              name=\"username\"\n              className=\"form-control\"\n              value={this.state.data.username}\n              onChange={this.handleChange}\n              id=\"username\"\n              aria-describedby=\"emailHelp\"\n              style={{\n                width: \"100%\",\n                display: \"flex\",\n                justifyContent: \"center\",\n                alignItems: \"center\",\n              }}\n            />\n            {this.state.errors.username && (\n              <div className=\"alert alert-danger\">\n                {\" \"}\n                {this.state.errors.username}\n              </div>\n            )}\n          </div>\n          <div className=\"form-group\">\n            <label htmlFor=\"password\">Password</label>\n            <input\n              id=\"password\"\n              value={this.state.data.password}\n              name=\"password\"\n              onChange={this.handleChange}\n              type=\"text\"\n              className=\"form-control\"\n              style={{\n                width: \"100%\",\n                display: \"flex\",\n                justifyContent: \"center\",\n                alignItems: \"center\",\n              }}\n            />\n            {this.state.errors.password && (\n              <div className=\"alert alert-danger\">\n                {\" \"}\n                {this.state.errors.password}\n              </div>\n            )}\n            {/*  <Link to=\"/studentHome\">\n              <button\n                disabled={this.validate()}\n                className=\"btn btn-primary\"\n                style={{ marginLeft: \"20%\" }}\n              >\n                Login Student\n              </button>\n            </Link> \n            <Link to=\"/advisorHome\">\n              <button\n                disabled={this.validate()}\n                className=\"btn btn-primary\"\n                style={{ marginLeft: \"20%\", marginTop: \"10px\" }}\n              >\n                Submit\n              </button>\n            </Link>\n          </div>\n        </form>\n      </div> */\n}","map":{"version":3,"sources":["/Users/joeruiz/Desktop/course-guide/Course-Guide-Frontend/src/components/loginForm.jsx"],"names":["React","Redirect","Joi","Form","auth","LoginForm","constructor","props","state","data","username","password","errors","schema","string","required","label","doSubmit","login","user","getCurrentUser","isAdvisor","_doc","console","log","location","window","href","ex","response","status","setState","render","handleSubmit","renderInput","renderButton"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,QAAT,QAAyB,kBAAzB;AACA,OAAOC,GAAP,MAAgB,aAAhB;AACA,OAAOC,IAAP,MAAiB,gBAAjB;AACA,OAAOC,IAAP,MAAiB,wBAAjB;;AAEA,MAAMC,SAAN,SAAwBF,IAAxB,CAA6B;AAC3BG,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;AADiB,SAInBC,KAJmB,GAIX;AACNC,MAAAA,IAAI,EAAE;AAAEC,QAAAA,QAAQ,EAAE,EAAZ;AAAgBC,QAAAA,QAAQ,EAAE;AAA1B,OADA;AAENC,MAAAA,MAAM,EAAE;AAFF,KAJW;AAAA,SASnBC,MATmB,GASV;AACPH,MAAAA,QAAQ,EAAER,GAAG,CAACY,MAAJ,GAAaC,QAAb,GAAwBC,KAAxB,CAA8B,UAA9B,CADH;AAEPL,MAAAA,QAAQ,EAAET,GAAG,CAACY,MAAJ,GAAaC,QAAb,GAAwBC,KAAxB,CAA8B,UAA9B;AAFH,KATU;;AAAA,SAcnBC,QAdmB,GAcR,YAAY;AACrB,UAAI;AACF,cAAM;AAAER,UAAAA;AAAF,YAAW,KAAKD,KAAtB;AACA,cAAMJ,IAAI,CAACc,KAAL,CAAWT,IAAI,CAACC,QAAhB,EAA0BD,IAAI,CAACE,QAA/B,CAAN,CAFE,CAGF;;AACA,cAAMQ,IAAI,GAAGf,IAAI,CAACgB,cAAL,EAAb;AACA,YAAIC,SAAS,GAAGF,IAAI,CAACG,IAAL,CAAUD,SAA1B;AACAE,QAAAA,OAAO,CAACC,GAAR,CAAYH,SAAZ;AACA,cAAM;AAAEb,UAAAA;AAAF,YAAY,KAAKD,KAAL,CAAWkB,QAA7B;;AACA,YAAIJ,SAAS,IAAI,IAAjB,EAAuB;AACrBK,UAAAA,MAAM,CAACD,QAAP,CAAgBE,IAAhB,GAAuB,cAAvB;AACAJ,UAAAA,OAAO,CAACC,GAAR,CAAY,uBAAZ;AACD,SAHD,MAGO,IAAI,CAACH,SAAL,EAAgB;AACrBK,UAAAA,MAAM,CAACD,QAAP,CAAgBE,IAAhB,GAAuB,cAAvB;AACAJ,UAAAA,OAAO,CAACC,GAAR,CAAY,uBAAZ;AACD;AACF,OAfD,CAeE,OAAOI,EAAP,EAAW;AACX,YAAIA,EAAE,CAACC,QAAH,IAAeD,EAAE,CAACC,QAAH,CAAYC,MAAZ,KAAuB,GAA1C,EAA+C;AAC7C,gBAAMlB,MAAM,GAAG,EAAE,GAAG,KAAKJ,KAAL,CAAWI;AAAhB,WAAf;AACAA,UAAAA,MAAM,CAACF,QAAP,GAAkBkB,EAAE,CAACC,QAAH,CAAYpB,IAA9B;AACA,eAAKsB,QAAL,CAAc;AAAEnB,YAAAA;AAAF,WAAd;AACD;AACF;AACF,KArCkB;;AAEjBW,IAAAA,OAAO,CAACC,GAAR,CAAYjB,KAAZ;AACD;;AAoCDyB,EAAAA,MAAM,GAAG;AACP;;;;;AAMA,wBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eADF,eAEE;AAAM,MAAA,QAAQ,EAAE,KAAKC,YAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG,KAAKC,WAAL,CAAiB,UAAjB,EAA6B,UAA7B,CADH,EAEG,KAAKA,WAAL,CAAiB,UAAjB,EAA6B,UAA7B,EAAyC,UAAzC,CAFH,EAGG,KAAKC,YAAL,CAAkB,OAAlB,CAHH,CAFF,CADF;AAUD;;AAzD0B;;AA4D7B,eAAe9B,SAAf;AAEA;AACE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqED","sourcesContent":["import React from \"react\";\nimport { Redirect } from \"react-router-dom\";\nimport Joi from \"joi-browser\";\nimport Form from \"../common/form\";\nimport auth from \"../service/authService\";\n\nclass LoginForm extends Form {\n  constructor(props) {\n    super(props);\n    console.log(props);\n  }\n  state = {\n    data: { username: \"\", password: \"\" },\n    errors: {},\n  };\n\n  schema = {\n    username: Joi.string().required().label(\"Username\"),\n    password: Joi.string().required().label(\"Password\"),\n  };\n\n  doSubmit = async () => {\n    try {\n      const { data } = this.state;\n      await auth.login(data.username, data.password);\n      // auth.loginWithJwt(response.headers[\"x-access-token\"]);\n      const user = auth.getCurrentUser();\n      var isAdvisor = user._doc.isAdvisor;\n      console.log(isAdvisor);\n      const { state } = this.props.location;\n      if (isAdvisor == true) {\n        window.location.href = \"/advisorHome\";\n        console.log(\"Going to advisor page\");\n      } else if (!isAdvisor) {\n        window.location.href = \"/studentHome\";\n        console.log(\"Going to student page\");\n      }\n    } catch (ex) {\n      if (ex.response && ex.response.status === 400) {\n        const errors = { ...this.state.errors };\n        errors.username = ex.response.data;\n        this.setState({ errors });\n      }\n    }\n  };\n\n  render() {\n    /* if (user._doc.isAdvisor == true) {\n      if (auth.getCurrentUser()) return <Redirect to=\"/advisorHome\" />;\n    } else {\n      if (auth.getCurrentUser()) return <Redirect to=\"/studentHome\" />;\n    } */\n\n    return (\n      <div>\n        <h3>Login</h3>\n        <form onSubmit={this.handleSubmit}>\n          {this.renderInput(\"username\", \"Username\")}\n          {this.renderInput(\"password\", \"Password\", \"password\")}\n          {this.renderButton(\"Login\")}\n        </form>\n      </div>\n    );\n  }\n}\n\nexport default LoginForm;\n\n{\n  /* <div>\n        <form onSubmit={this.handleSubmit}>\n          <div className=\"form-group\">\n            <label htmlFor=\"username\">Username</label>\n            <input\n              type=\"text\"\n              name=\"username\"\n              className=\"form-control\"\n              value={this.state.data.username}\n              onChange={this.handleChange}\n              id=\"username\"\n              aria-describedby=\"emailHelp\"\n              style={{\n                width: \"100%\",\n                display: \"flex\",\n                justifyContent: \"center\",\n                alignItems: \"center\",\n              }}\n            />\n            {this.state.errors.username && (\n              <div className=\"alert alert-danger\">\n                {\" \"}\n                {this.state.errors.username}\n              </div>\n            )}\n          </div>\n          <div className=\"form-group\">\n            <label htmlFor=\"password\">Password</label>\n            <input\n              id=\"password\"\n              value={this.state.data.password}\n              name=\"password\"\n              onChange={this.handleChange}\n              type=\"text\"\n              className=\"form-control\"\n              style={{\n                width: \"100%\",\n                display: \"flex\",\n                justifyContent: \"center\",\n                alignItems: \"center\",\n              }}\n            />\n            {this.state.errors.password && (\n              <div className=\"alert alert-danger\">\n                {\" \"}\n                {this.state.errors.password}\n              </div>\n            )}\n            {/*  <Link to=\"/studentHome\">\n              <button\n                disabled={this.validate()}\n                className=\"btn btn-primary\"\n                style={{ marginLeft: \"20%\" }}\n              >\n                Login Student\n              </button>\n            </Link> \n            <Link to=\"/advisorHome\">\n              <button\n                disabled={this.validate()}\n                className=\"btn btn-primary\"\n                style={{ marginLeft: \"20%\", marginTop: \"10px\" }}\n              >\n                Submit\n              </button>\n            </Link>\n          </div>\n        </form>\n      </div> */\n}\n"]},"metadata":{},"sourceType":"module"}